(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2470:(e,s,r)=>{"use strict";r.d(s,{default:()=>p});var a=r(5594),o=r(376),t=r(5155),i=r(2115),l=r(5324),d=r(8533),n=r(8883),c=r(8749),m=r(2657),u=r(5695),g=r(6874),h=r.n(g),x=r(6263);function p(){let e=(0,u.useRouter)(),[s,r]=(0,i.useState)(()=>({data:{email:"",password:"",rememberMe:!1},errors:{},isLoading:!1,showPassword:!1,isSuccess:!1})),g=(0,i.useCallback)(e=>e.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())?void 0:"Invalid email format":"Email required",[]),p=(0,i.useCallback)(e=>e?e.length<6?"Password must be at least 6 characters":void 0:"Password required",[]),b=(0,i.useCallback)(()=>{let e=g(s.data.email),t=p(s.data.password),i={};return e&&(i.email=e),t&&(i.password=t),r(e=>(0,o._)((0,a._)({},e),{errors:i})),0===Object.keys(i).length},[s.data,g,p]),w=(0,i.useCallback)(e=>s=>{let t="rememberMe"===e?s.target.checked:s.target.value;r(s=>(0,o._)((0,a._)({},s),{data:(0,o._)((0,a._)({},s.data),{[e]:t}),errors:(0,o._)((0,a._)({},s.errors),{[e]:void 0,general:void 0})}))},[]),f=(0,i.useCallback)(()=>{r(e=>(0,o._)((0,a._)({},e),{showPassword:!e.showPassword}))},[]),y=(0,i.useCallback)(async t=>{if(t.preventDefault(),console.log("\uD83D\uDD10 Login form submitted"),console.log("\uD83D\uDCE7 Email:",s.data.email),!b())return void console.log("❌ Form validation failed");r(e=>(0,o._)((0,a._)({},e),{isLoading:!0,errors:{}}));try{console.log("\uD83D\uDE80 Attempting login with Appwrite...");let t=await (0,x.Lx)(s.data.email.trim(),s.data.password);console.log("✅ Login successful:",t);let i=await (0,x.HW)();console.log("\uD83D\uDC64 Current user:",i),r(e=>(0,o._)((0,a._)({},e),{isLoading:!1,isSuccess:!0})),setTimeout(()=>{console.log("\uD83C\uDFE0 Redirecting to dashboard..."),e.push("/dashboard")},1e3)}catch(s){console.error("❌ Login failed:",s);let e="Login failed. Please try again.";s.message&&(e=s.message.includes("Invalid credentials")?"Invalid email or password. Please check your credentials.":s.message.includes("user_not_found")?"No account found with this email address.":s.message.includes("too_many_requests")?"Too many login attempts. Please try again later.":s.message),r(s=>(0,o._)((0,a._)({},s),{isLoading:!1,errors:{general:e}}))}},[s.data,b,e]);return(0,t.jsxs)("form",{onSubmit:y,className:"space-y-6",noValidate:!0,children:[s.isSuccess&&(0,t.jsxs)("div",{className:"flex items-center p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)(l.A,{className:"h-5 w-5 text-green-600 mr-3"}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Login successful! Redirecting to dashboard..."})]}),s.errors.general&&(0,t.jsxs)("div",{className:"flex items-start p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)(d.A,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-sm text-red-700 font-medium",children:s.errors.general})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email Address"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"email",type:"email",value:s.data.email,onChange:w("email"),className:"w-full px-4 py-4 border-2 rounded-xl bg-white text-gray-900 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 ".concat(s.errors.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-200 hover:border-gray-300"),placeholder:"Enter your email address",disabled:s.isLoading||s.isSuccess,autoComplete:"email"}),(0,t.jsx)("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:(0,t.jsx)(n.A,{className:"h-5 w-5 text-gray-400"})})]}),s.errors.email&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-1 flex-shrink-0"}),s.errors.email]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"password",type:s.showPassword?"text":"password",value:s.data.password,onChange:w("password"),className:"w-full px-4 py-4 border-2 rounded-xl bg-white text-gray-900 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 pr-12 ".concat(s.errors.password?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-200 hover:border-gray-300"),placeholder:"Enter your password",disabled:s.isLoading||s.isSuccess,autoComplete:"current-password"}),(0,t.jsx)("button",{type:"button",onClick:f,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors focus:outline-none",disabled:s.isLoading||s.isSuccess,"aria-label":s.showPassword?"Hide password":"Show password",children:s.showPassword?(0,t.jsx)(c.A,{className:"h-5 w-5"}):(0,t.jsx)(m.A,{className:"h-5 w-5"})})]}),s.errors.password&&(0,t.jsxs)("p",{className:"text-sm text-red-500 flex items-center",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-1 flex-shrink-0"}),s.errors.password]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"rememberMe",type:"checkbox",checked:s.data.rememberMe,onChange:w("rememberMe"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",disabled:s.isLoading||s.isSuccess}),(0,t.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),(0,t.jsx)(h(),{href:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-500 font-medium transition-colors",children:"Forgot password?"})]}),(0,t.jsx)("button",{type:"submit",disabled:s.isLoading||s.isSuccess,className:"w-full flex justify-center items-center py-4 px-6 text-base font-semibold rounded-xl min-h-[56px] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transform hover:scale-[1.02] ".concat(s.isLoading||s.isSuccess?"bg-gray-400 text-white cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white shadow-lg hover:shadow-xl"),children:s.isLoading?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-3"}),(0,t.jsx)("span",{children:"Signing In..."})]}):s.isSuccess?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{className:"h-5 w-5 mr-3"}),(0,t.jsx)("span",{children:"Success! Redirecting..."})]}):(0,t.jsx)("span",{children:"Sign In"})}),!1]})}},6883:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,2699)),Promise.resolve().then(r.bind(r,2470))}},e=>{var s=s=>e(e.s=s);e.O(0,[38,327,0,441,684,358],()=>s(6883)),_N_E=e.O()}]);