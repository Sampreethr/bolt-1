(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{699:(e,t,s)=>{Promise.resolve().then(s.bind(s,8970))},6263:(e,t,s)=>{"use strict";s.d(t,{DY:()=>u,HW:()=>g,LL:()=>c,Lx:()=>d,NU:()=>n,kg:()=>m,y4:()=>h});var o=s(5594),a=s(376),r=s(3327);let n={projectId:"686cee83002d3d0a6c2a",endpoint:"https://syd.cloud.appwrite.io/v1",databaseId:"686f57ef0030a8f74e85",collections:{users:"686f581c000af0ad4c69",audits:"686f5853002a3718e56e",contacts:"686f5aaf00140d424518",sessions:"sessions_collection_id"},bucketId:"auditspro_documents",sdkVersion:"18.1.1",serverVersion:"1.7.x",platform:{name:"AuditsPro Web App",hostname:window.location.hostname}},i=new r.Kj;try{i.setEndpoint(n.endpoint).setProject(n.projectId),console.log("\uD83D\uDE80 Appwrite Client initialized for: ".concat(n.platform.hostname))}catch(e){console.error("❌ Failed to initialize Appwrite client:",e)}let l=new r.gD(i),c=new r.Lv(i);new r.wc(i),new r.P9(i);let d=async(e,t)=>{try{console.log("\uD83D\uDD10 Authenticating user:",e);let s=await l.createEmailPasswordSession(e,t);return console.log("✅ Authentication successful:",{sessionId:s.$id,userId:s.userId,provider:s.provider,expire:s.expire}),s}catch(e){var s;if(console.error("❌ Authentication failed:",e),401===e.code)throw Error("Invalid email or password. Please check your credentials and try again.");if(429===e.code)throw Error("Too many login attempts. Please wait a few minutes before trying again.");if(400===e.code)throw Error("Invalid email format. Please enter a valid email address.");else if(null==(s=e.message)?void 0:s.includes("network"))throw Error("Network error. Please check your internet connection and try again.");else throw Error(e.message||"Login failed. Please try again or contact support.")}},u=async(e,t,s)=>{try{console.log("\uD83D\uDCDD Creating user account:",{email:e,name:s});let o=await l.create("unique()",e,t,s);return console.log("✅ User account created:",{userId:o.$id,email:o.email,name:o.name,status:o.status}),o}catch(e){var o,a,r;if(console.error("❌ Registration failed:",e),409===e.code)throw Error("An account with this email address already exists. Please try signing in instead.");if(400===e.code){if(null==(a=e.message)?void 0:a.includes("password"))throw Error("Password must be at least 8 characters long and contain a mix of letters and numbers.");if(null==(r=e.message)?void 0:r.includes("email"))throw Error("Please enter a valid email address.");throw Error("Please check your information and try again.")}if(null==(o=e.message)?void 0:o.includes("network"))throw Error("Network error. Please check your internet connection and try again.");else throw Error(e.message||"Registration failed. Please try again or contact support.")}},m=async e=>{try{console.log("\uD83D\uDCBE Creating user document:",e);let t=(0,a._)((0,o._)({},e),{preferences:(0,o._)({notifications:!0,newsletter:!1,theme:"system",language:"en-AU"},e.preferences),subscription:(0,o._)({plan:"free",status:"active"},e.subscription),metadata:(0,o._)({lastLoginAt:new Date().toISOString(),loginCount:1},e.metadata),$createdAt:new Date().toISOString(),$updatedAt:new Date().toISOString()}),s=await c.createDocument(n.databaseId,n.collections.users,"unique()",t);return console.log("✅ User document created:",s.$id),s}catch(e){throw console.error("❌ Failed to create user document:",e),console.warn("⚠️ User authenticated but profile creation failed. Profile can be created later."),e}},g=async()=>{try{console.log("\uD83D\uDC64 Getting current user session...");let e=await l.get();return console.log("✅ Current user session:",{userId:e.$id,email:e.email,name:e.name,status:e.status,emailVerification:e.emailVerification}),e}catch(e){return console.log("ℹ️ No active user session"),null}},h=async()=>{try{console.log("\uD83D\uDEAA Logging out user..."),await l.deleteSession("current"),console.log("✅ User logged out successfully"),localStorage.removeItem("user"),sessionStorage.clear()}catch(e){console.error("❌ Logout error:",e),console.warn("⚠️ Logout may have failed, but local session cleared")}};console.log("\uD83D\uDE80 AuditsPro Appwrite SDK initialized successfully!"),console.log("\uD83D\uDCCA Configuration:",{projectId:n.projectId,endpoint:n.endpoint,databaseId:n.databaseId,collections:Object.keys(n.collections).length,sdkVersion:n.sdkVersion,serverVersion:n.serverVersion}),console.log("✅ Ready for authentication and database operations")},8970:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var o=s(5155),a=s(2115),r=s(6263);function n(){let[e,t]=(0,a.useState)("Not tested"),[s,n]=(0,a.useState)(""),i=async()=>{try{t("Testing..."),n("Connecting to Appwrite..."),console.log("Project ID:",r.NU.projectId),console.log("Endpoint:",r.NU.endpoint),console.log("Database ID:",r.NU.databaseId);let e=await r.LL.listDocuments(r.NU.databaseId,"your-collection-id");t("✅ SUCCESS!"),n("Connected successfully! Found ".concat(e.documents.length," document(s)")),console.log("Documents:",e.documents)}catch(e){t("❌ FAILED"),n("Error: ".concat(e instanceof Error?e.message:"Unknown error")),console.error("Connection error:",e)}};return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,o.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\uD83E\uDDEA Test Appwrite Connection"}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Configuration Status:"}),(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,o.jsxs)("p",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"font-medium",children:"Project ID:"}),(0,o.jsx)("span",{className:r.NU.projectId?"text-green-600":"text-red-600",children:r.NU.projectId||"❌ NOT SET"})]}),(0,o.jsxs)("p",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"font-medium",children:"Endpoint:"}),(0,o.jsx)("span",{className:r.NU.endpoint?"text-green-600":"text-red-600",children:r.NU.endpoint||"❌ NOT SET"})]}),(0,o.jsxs)("p",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"font-medium",children:"Database ID:"}),(0,o.jsx)("span",{className:r.NU.databaseId?"text-green-600":"text-red-600",children:r.NU.databaseId||"❌ NOT SET"})]})]})]}),(0,o.jsx)("div",{className:"text-center mb-6",children:(0,o.jsx)("button",{onClick:i,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-8 py-3 rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg",children:"\uD83D\uDE80 Test Connection"})}),(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:["Status: ",(0,o.jsx)("span",{className:"text-blue-600",children:e})]}),(0,o.jsx)("div",{className:"bg-gray-50 p-4 rounded border",children:(0,o.jsx)("p",{className:"text-sm text-gray-700",children:s})})]}),(0,o.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 p-6 rounded-lg",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"\uD83D\uDCCB Setup Instructions:"}),(0,o.jsxs)("ol",{className:"text-sm text-blue-700 space-y-1",children:[(0,o.jsx)("li",{children:"1. Make sure you've created your Appwrite project"}),(0,o.jsxs)("li",{children:["2. Update your ",(0,o.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:".env.local"})," file with actual values"]}),(0,o.jsx)("li",{children:"3. Restart your development server"}),(0,o.jsx)("li",{children:'4. Click "Test Connection" button above'})]})]}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsx)("a",{href:"/",className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"← Back to Home"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[327,441,684,358],()=>t(699)),_N_E=e.O()}]);